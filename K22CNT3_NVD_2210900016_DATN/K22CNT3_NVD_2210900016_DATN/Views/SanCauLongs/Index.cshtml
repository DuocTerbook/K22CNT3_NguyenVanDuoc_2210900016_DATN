@model IEnumerable<K22CNT3_NVD_2210900016_DATN.Models.SanCauLong>

@{
    ViewBag.Title = "Danh sách sân cầu lông";
}

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />

<style>
    .page-title {
        font-weight: 700;
        color: #1e40af;
    }

    .card-custom {
        border-radius: 16px;
        box-shadow: 0 10px 28px rgba(0,0,0,.15);
        border: none;
    }

    .badge-status {
        font-size: .85rem;
        padding: .4em .6em;
        border-radius: 12px;
    }

    .table th {
        background: #f1f5f9;
        font-weight: 600;
        text-align: center;
    }

    .table td {
        vertical-align: middle;
    }

    .action-btn i {
        margin-right: 4px;
    }
</style>

<div class="container py-4">

    <!-- HEADER -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h3 class="page-title">
                <i class="fas fa-shuttlecock me-1"></i> Danh sách sân cầu lông
            </h3>
            <small class="text-muted">
                Quản lý thông tin các sân cầu lông
            </small>
        </div>

        <a href="@Url.Action("Create")" class="btn btn-primary">
            <i class="fas fa-plus"></i> Thêm sân mới
        </a>
    </div>

    <!-- THÔNG BÁO -->
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show">
            <i class="fas fa-check-circle me-1"></i>
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <!-- TABLE -->
    <div class="card card-custom">
        <div class="card-body">

            <table class="table table-bordered table-hover align-middle text-center">
                <thead>
                    <tr>
                        <th>Tên sân</th>
                        <th>Loại sân</th>
                        <th>Giá / giờ</th>
                        <th>Trạng thái</th>
                        <th>Mô tả</th>
                        <th width="220">Thao tác</th>
                    </tr>
                </thead>

                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        foreach (var item in Model)
                        {
                            <tr>
                                <td class="fw-semibold text-start">
                                    @item.TenSan
                                </td>

                                <td>
                                    @item.LoaiSan
                                </td>

                                <td class="text-success fw-bold">
                                    @item.GiaThueTheoGio.ToString("N0") ₫
                                </td>

                                <td>
                                    @if (item.TrangThai == "HoatDong")
                                    {
                                        <span class="badge bg-success badge-status">
                                            <i class="fas fa-check"></i> Hoạt động
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-secondary badge-status">
                                            <i class="fas fa-ban"></i> Ngưng
                                        </span>
                                    }
                                </td>

                                <!-- MÔ TẢ - ĐÃ FIX LỖI SYSTEM -->
                                <td class="text-start">
                                    @if (string.IsNullOrEmpty(item.MoTa))
                                    {
                                        <span class="text-muted fst-italic">
                                            Chưa có mô tả
                                        </span>
                                    }
                                    else
                                    {
                                        @item.MoTa
                                    }
                                </td>

                                <td>
                                    <a class="btn btn-sm btn-warning action-btn"
                                       href="@Url.Action("Edit", new { id = item.ID_San })">
                                        <i class="fas fa-edit"></i> Sửa
                                    </a>

                                    <a class="btn btn-sm btn-info text-white action-btn"
                                       href="@Url.Action("Details", new { id = item.ID_San })">
                                        <i class="fas fa-eye"></i> Xem
                                    </a>

                                    <a class="btn btn-sm btn-danger action-btn"
                                       href="@Url.Action("Delete", new { id = item.ID_San })">
                                        <i class="fas fa-trash"></i> Xóa
                                    </a>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="6" class="text-muted fst-italic">
                                Chưa có dữ liệu sân cầu lông
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

        </div>
    </div>
</div>
